<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:f="http://xmlns.jcp.org/jsf/core"
      xmlns:h="http://xmlns.jcp.org/jsf/html"
      xmlns:p="http://primefaces.org/ui">


    <p:dialog styleClass="ancho80" header="Eliminar Hospital" widgetVar="dlg8" showEffect="fade" modal="true">
        <f:view>
            <h:form id="formEH" class="frmFlotante">
                <p:card styleClass="flex justify-content-center">
                    <div class="row m-auto">
                    <div class="col-12">
                    <p:dataTable id="table" value="#{adminBean.hospitalDTOS}" var="hospitales" scrollable="true" scrollHeight="400px">
                        <p:column headerText="id" styleClass="d-none d-md-table-cell">
                            <h:outputText value="#{hospitales.idHospital}" />
                        </p:column>
                        <p:column headerText="Nombre">
                            <h:outputText value="#{hospitales.nombreHospital}" />
                        </p:column>
                        <p:column headerText="Tipo" styleClass="d-none d-md-table-cell">
                            <h:outputText value="#{hospitales.tipoHospital}" />
                        </p:column>

                        <p:column headerText="S.Eme.">
                            <p:dialog id="s_eme" header="Servicios de Emergencia" widgetVar="listaServicios" resizable="false">
                                <p:dataTable paginator="true" rows="4" id="table_servicios" value="#{hospitales.servicioEmergencia}" var="ser" disabledSelection="true">
                                    <p:column headerText="ID Servicios.E" sortBy="#{ser.idServicio}" filterBy="#{ser.idServicio}" filterMatchMode="contains" >
                                        <p:outputLabel value="#{ser.idServicio}" />
                                    </p:column>
                                    <p:column headerText="Nombre">
                                        <p:outputLabel value="#{ser.nombre}" />
                                    </p:column>
                                    <p:column headerText="Camas totales">
                                        <p:outputLabel value="#{ser.totalCama}" />
                                    </p:column>
                                    <p:column headerText="Camas libres">
                                        <p:outputLabel value="#{ser.camasLibres}" />
                                    </p:column>
                                </p:dataTable>
                            </p:dialog>
                            <p:commandButton id="mostraServicios" styleClass="rounded-button ui-button-primary" icon="pi pi-plus" onclick="PF('listaServicios').show();" />
                        </p:column>
                        <p:column headerText="Ambu.">
                            <p:dialog id="h_ambu" header="Ambulacias" widgetVar="listaAmbulacias" resizable="false">
                                <p:dataTable paginator="true" rows="4" id="table_ambulancias" value="#{hospitales.ambulanciaDTOS}" var="amb" disabledSelection="true">
                                    <p:column headerText="ID Ambulancia">
                                        <p:outputLabel value="#{amb.idAmbulancia}" />
                                    </p:column>
                                    <p:column headerText="Codigo">
                                        <p:outputLabel value="#{amb.idCodigo}" />
                                    </p:column>
                                    <p:column headerText="Distancia Maxima Desvio">
                                        <p:outputLabel value="#{amb.distanciaMaxDesvio}" />
                                    </p:column>
                                </p:dataTable>
                            </p:dialog>
                            <p:commandButton id="mostrarAmbulacias" styleClass="rounded-button ui-button-primary" icon="pi pi-plus" onclick="PF('listaAmbulacias').show();" />
                        </p:column>
                        <p:column headerText="Elim.">
                            <p:commandButton styleClass="rounded-button ui-button-danger" icon="pi pi-trash" process="@this" action="#{adminBean.eliminarH(hospitales.idHospital)}" update="table" />
                        </p:column>
                    </p:dataTable>
                    </div>
                    </div>
                </p:card>
            </h:form>
        </f:view>
    </p:dialog>
</html>