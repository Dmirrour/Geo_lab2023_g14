<!DOCTYPE html>
<html>
<head>
    <title>Mapa WFS</title>
    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.7.1/dist/leaflet.css" />
    <link rel="stylesheet" href="lib/css/style.css" />
    <link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha3/dist/css/bootstrap.min.css" integrity="sha384-KK94CHFLLe+nY2dmCWGMq91rCGa5gtU4mk92HdvYe+M/SXH301p5ILy+dN9+nJOZ" crossorigin="anonymous" />
    <script type="javascript" src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha3/dist/js/bootstrap.bundle.min.js" integrity="sha384-ENjdO4Dr2bkBIFxQpeoTz1HIcje39Wm4jDKdf19U8gI4ddQ3GYNS7NTKfAdVQSZe" crossorigin="anonymous"></script>

    <script src="../scripts/lib/ol-ext-v3.2.23/ol-ext.js"></script>
    <link rel="stylesheet" href="../scripts/lib/ol-ext-v3.2.23/font-awesome.min.css" />

    <script src="lib/js/leaflet-src.js"></script>
    <script src="lib/js/leaflet.draw-src.js"></script>
    <script src="lib/js/leaflet.draw-shapefile.js"></script>

    <link rel="stylesheet" href="lib/css/leaflet.css" />
    <link rel="stylesheet" href="lib/css/leaflet.draw.css" />
    <link rel="stylesheet" href="lib/css/leaflet.draw-shapefile.css" />

    <script src="../scripts/geolet.js"></script>
    <script src="lib/js/index.js"></script>
    <style>
        #map {
            height: 500px;
        }
    </style>
</head>
<body>
<div id="map"></div>

<script src="https://unpkg.com/leaflet@1.7.1/dist/leaflet.js"></script>
<script>
    // Inicializar el mapa
    var map = L.map('map').setView([-34.896411, -56.175027], 10);

    // Agregar capa base de OpenStreetMap
    L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {
        attribution: 'Map data &copy; OpenStreetMap contributors'
    }).addTo(map);

    // Crear una capa de GeoJSON
    var geojsonLayer = L.geoJSON().addTo(map);

    // Solicitar datos WFS a GeoServer
    var url =
        'http://localhost:8081/geoserver/wfs?' +
        'service=WFS&' +
        'version=1.0.0&' +
        'request=GetFeature&' +
        'typeName=Geo_lab2023_g14PersistenceUnit:ft_depto&' +
        'srsName=EPSG:4326&' +
        'outputFormat=application/json';

    fetch(url)
        .then(function (response) {
            return response.json();
        })
        .then(function (data) {
            // Agregar los datos a la capa de GeoJSON
            console.log(data);
            geojsonLayer.addData(data);
        })
        .catch(function (error) {
            console.error('Error:', error);
        });
</script>
</body>
</html>
