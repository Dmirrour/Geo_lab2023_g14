<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html
        xmlns="http://www.w3.org/1999/xhtml"
        xmlns:h="http://xmlns.jcp.org/jsf/html"
        xmlns:p="http://primefaces.org/ui"
        xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
        xmlns:f="http://xmlns.jcp.org/jsf/core"
        lang="es" xml:lang="es"
>

<h:head>
   <!-- VERIFICAR SESION -->
   <f:event type="preRenderView" listener="#{sesion.verificarSesion()}"></f:event>
   <!-- VERIFICAR SESION -->

   <meta http-equiv="X-UA-Compatible" content="IE=edge" />
   <meta http-equiv="content-type" content="text/html; charset=UTF-8" />
   <meta name="viewport" content="width=device-width, initial-scale=1" />
   <title>Administrador</title>

   <!-- mapa css -->
   <link rel="stylesheet" href="lib/css/leaflet.css" />
   <link rel="stylesheet" href="lib/css/leaflet.draw.css" />
   <link rel="stylesheet" href="lib/css/leaflet.draw-shapefile.css" />

   <link rel="stylesheet" href="https://code.jquery.com/ui/1.12.1/themes/base/jquery-ui.css" />

   <!-- boostrap -->
   <link rel="stylesheet" href="lib/css/style.css" />
   <link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha3/dist/css/bootstrap.min.css" integrity="sha384-KK94CHFLLe+nY2dmCWGMq91rCGa5gtU4mk92HdvYe+M/SXH301p5ILy+dN9+nJOZ" crossorigin="anonymous" />
   <script type="javascript" src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha3/dist/js/bootstrap.bundle.min.js" integrity="sha384-ENjdO4Dr2bkBIFxQpeoTz1HIcje39Wm4jDKdf19U8gI4ddQ3GYNS7NTKfAdVQSZe" crossorigin="anonymous"></script>

   <!-- mapa js -->
   <script type="" src="lib/js/leaflet-src.js"></script>
   <script type="" src="lib/js/leaflet.draw-src.js"></script>
   <script type="" src="lib/js/leaflet.draw-shapefile.js"></script>
   <script type="" src="lib/js/index.js"></script>
   <script type="" src="../scripts/geolet.js"></script>
   <script type="" src="lib/js/layerWFS.js"></script>

   <!-- cONSULTAS query -->
   <script type="" src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
   <script type="" src="https://code.jquery.com/ui/1.12.1/jquery-ui.js"></script>
   <!-- scripts -->
   <script type="" src="lib/js/indexAdm.js"></script>


   <h:outputStylesheet name="primeicons/primeicons.css" library="primefaces" />
   <link rel="stylesheet" href="https://unpkg.com/primeflex@^3/primeflex.css" />

   #{sesion.init()}
   #{adminBean.initH()}
   #{adminBean.initS()}
   #{adminBean.initA()}
</h:head>

<body>
   <p:growl id="messages" showDetail="true" />
   <div id="top">
      <div class="navbar navbar-expand-sm navbar-dark bg-dark">
         <div class="container-fluid">
            <a class="navbar-brand" href="javascript:void(0)">Administrador</a>
            <h2>
               <h:outputText styleClass="text-primary" value="Bienvenido #{sessionScope.usuario.usuario}" />
            </h2>

            <div class="d-flex" id="mynavbar">
               <h:form>
                  <p:menuButton value="Eliminar">
                     <p:menuitem value="Eliminar Hospital" type="button" icon="pi pi-external-link" onclick="PF('dlg8').show()" />
                     <p:menuitem value="Eliminar Ambulancia" type="button" icon="pi pi-external-link" onclick="PF('dlg7').show()" />
                     <p:menuitem value="Eliminar S. Emergencia" type="button" icon="pi pi-external-link" onclick="PF('dlg6').show()" />
                  </p:menuButton>
                  <span> - </span>
                  <p:menuButton value="Modificar">
                     <p:menuitem value="Modificar Ambulancia" type="button" icon="pi pi-external-link" onclick="PF('dlg5').show()" />
                     <p:menuitem value="Modificar S. Emergencia" type="button" icon="pi pi-external-link" onclick="PF('dlg4').show()" />
                  </p:menuButton>
                  <span> - </span>
                  <p:menuButton value="Alta">
                     <p:menuitem value="Alta Hospital" type="button" icon="pi pi-external-link" onclick="PF('dlg1').show()" />
                     <p:menuitem value="Alta Ambulancia" type="button" icon="pi pi-external-link" onclick="PF('dlg2').show()" />
                     <p:menuitem value="Alta S. Emergencia" type="button" icon="pi pi-external-link" onclick="PF('dlg3').show()" />
                  </p:menuButton>
                  <span> - </span>
                  <p:commandButton value="Salir" actionListener="#{sesion.cerrarSesion()}" class="btn btn-danger" icon="pi pi-power-off" action="/Geo_lab2023_g14-web/login.xhtml" />
               </h:form>
            </div>

         </div>
      </div>
   </div>
   <div class="container-fluid mt-3">
      <div id="map" style="position: absolute !important;"></div>
      <script type="">CrearMapaAdmin();</script>
   </div>
   <script type="">addLayersWFS();</script>
   <script type="">addLayers();</script>

   <!-- FORM'S  -->
   <p:outputPanel id="formPanel">
      <ui:include src="lib/forms/altaAmbulancia.xhtml"/>
      <ui:include src="lib/forms/altaHospital.xhtml"/>
      <ui:include src="lib/forms/altaServicioEmergencia.xhtml"/>
      <ui:include src="lib/forms/eliminarAmbulancia.xhtml"/>
      <ui:include src="lib/forms/eliminarHospital.xhtml"/>
      <ui:include src="lib/forms/eliminarSE.xhtml"/>
      <ui:include src="lib/forms/modificarSE.xhtml"/>
   </p:outputPanel>
   <!-- END FORM'S -->
   <script type="">cargarMapaAltaSE();</script>
   <script type="">cargarMapaAltaAmbulancia();</script>
</body>
</html>