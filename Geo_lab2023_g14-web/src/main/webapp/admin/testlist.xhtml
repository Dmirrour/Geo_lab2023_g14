<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
        "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:h="http://xmlns.jcp.org/jsf/html"
      xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
      xmlns:f="http://xmlns.jcp.org/jsf/core"
      xmlns:p="http://primefaces.org/ui">
<h:head>
   <link rel="stylesheet" href="https://unpkg.com/primeflex@^3/primeflex.css"/>
   <title>AdminGeo</title>
   #{adminBean.initH()}
   #{adminBean.initA()}
</h:head>
<h:body>
      <f:view>
         <p:card styleClass="flex justify-content-center">
            <h2 class="text-center">LISTA DE TODAS LOS HOSPITALES</h2>
            <h:form id="form">
               <p:dataTable  id="table" value="#{adminBean.hospitalDTOS}" var="hospitales">
                  <p:column headerText="idHospital">
                     <h:outputText value="#{hospitales.idHospital}" />
                  </p:column>
                  <p:column headerText="nombre">
                     <h:outputText value="#{hospitales.nombreHospital}" />
                  </p:column>
                  <p:column headerText="tipo">
                     <h:outputText value="#{hospitales.tipoHospital}" />
                  </p:column>
                  <p:column headerText="s. emergencia">
                     <h:outputText value="#{hospitales.servicioEmergencia.idServicio}" />
                  </p:column>

                  <p:column headerText="Ambulacias">
                     <p:dialog id="h_ambu" header="Ambulacias" widgetVar="listaAmbulacias" modal="true" resizable="false">
                        <p:dataTable paginator="true" rows="8" id="table_ambulancias" value="#{hospitales.ambulanciaDTOS}" var="amb" disabledSelection="true">
                           <p:column headerText="ID Ambulancia">
                              <p:outputLabel value="#{amb.idAmbulancia}"/>
                           </p:column>
                           <p:column headerText="Codigo">
                              <p:outputLabel value="#{amb.idCodigo}"/>
                           </p:column>
                           <p:column headerText="Distancia Maxima Desvio">
                              <p:outputLabel value="#{amb.distanciaMaxDesvio}"/>
                           </p:column>
                        </p:dataTable>
                     </p:dialog>

                     <p:commandButton
                             id="mostrarAmbulacias"
                             styleClass="rounded-button ui-button-primary"
                             icon="pi pi-plus"
                             onclick="PF('listaAmbulacias').show();"
                     />
                  </p:column>


                  <p:column headerText="false">
                     <p:commandButton styleClass="rounded-button ui-button-danger"
                                      icon="pi pi-trash"
                                      process="@this"
                                      action="#{adminBean.eliminarH(hospitales.idHospital)}"
                                      update="table"
                     />
                  </p:column>
               </p:dataTable>
            </h:form>
         </p:card>
      </f:view>
</h:body>
</html>
